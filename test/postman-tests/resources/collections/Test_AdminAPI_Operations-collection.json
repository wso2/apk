{
	"info": {
		"_postman_id": "51b4a790-d2a5-4e67-aa01-8420c991af4e",
		"name": "Test Admin API Operations",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Generate Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var accessTokenResponse = pm.response.json();",
							"pm.collectionVariables.set(\"access_token\",accessTokenResponse.access_token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{client_secret}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{client_id}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Host",
						"value": "idp.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "grant_type",
							"value": "client_credentials",
							"type": "default"
						}
					]
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/oauth2/token",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"oauth2",
						"token"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Create Application Rate Plan",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"  pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Assert Internal BackOffice API creation response\", () => {",
							"    //parse the response JSON and test three properties",
							"    const responseJson = pm.response.json();",
							"    //Usually come as false and need to assert in future",
							"    //pm.expect(responseJson.isDeployed).equals(pm.collectionVariables.get('idTest1'));",
							"    pm.expect(responseJson.description).equals(pm.collectionVariables.get('applicationRatePlanDescription'));",
							"    pm.expect(responseJson.displayName).equals(pm.collectionVariables.get('applicationRatePlanDisplayName'));",
							"    pm.expect(responseJson.planName).equals(pm.collectionVariables.get('applicationRatePlanName'));",
							"    //ID is autogenerated hence skipped asseting",
							"    // pm.expect(responseJson.policyId).equals(pm.collectionVariables.get('contextTest1'));",
							"    pm.collectionVariables.set(\"applicationRatePlanID\",responseJson.planId)",
							"",
							"    pm.expect(responseJson.defaultLimit.type).equals(pm.collectionVariables.get('applicationRatePlanType'));",
							"    pm.expect(responseJson.defaultLimit.requestCount.requestCount).to.eql(parseInt(pm.collectionVariables.get('applicationRatePlanRequestCount')));",
							"    pm.expect(responseJson.defaultLimit.requestCount.timeUnit).equals(pm.collectionVariables.get('applicationRatePlanTimeUnit'));",
							"    pm.expect(responseJson.defaultLimit.requestCount.unitTime).equals(parseInt(pm.collectionVariables.get('applicationRatePlanTime')));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"planName\": \"{{applicationRatePlanName}}\",\n  \"displayName\": \"{{applicationRatePlanDisplayName}}\",\n  \"description\": \"{{applicationRatePlanDescription}}\",\n  \"defaultLimit\": {\n    \"type\": \"{{applicationRatePlanType}}\",\n    \"requestCount\": {\n      \"requestCount\": {{applicationRatePlanRequestCount}},\n      \"timeUnit\": \"{{applicationRatePlanTimeUnit}}\",\n      \"unitTime\": {{applicationRatePlanTime}}\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/application-rate-plans",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"application-rate-plans"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Get Application Rate Plan By ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// pm.test(\"Assert Admin get application rate plan by ID response\", () => {",
							"//     //parse the response JSON and test three properties",
							"//     const responseJson = pm.response.json();",
							"//     //Usually come as false and need to assert in future",
							"//     //pm.expect(responseJson.isDeployed).equals(pm.collectionVariables.get('idTest1'));",
							"//     pm.expect(responseJson.description).equals(pm.collectionVariables.get('applicationRatePlanDescription'));",
							"//     //pm.expect(responseJson.displayName).equals(pm.collectionVariables.get('applicationRatePlanDisplayName'));",
							"//     pm.expect(responseJson.planName).equals(pm.collectionVariables.get('applicationRatePlanName'));",
							"//     pm.expect(responseJson.defaultLimit.type).equals(pm.collectionVariables.get('applicationRatePlanType'));",
							"//     pm.expect(responseJson.defaultLimit.requestcount).equals(parseInt(pm.collectionVariables.get('applicationRatePlanRequestCount')));",
							"//     pm.expect(responseJson.timeunit).equals(pm.collectionVariables.get('applicationRatePlanTimeUnit'));",
							"//     pm.expect(responseJson.unittime).equals(parseInt(pm.collectionVariables.get('applicationRatePlanTime')));",
							"// });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/application-rate-plans/{{applicationRatePlanID}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"application-rate-plans",
						"{{applicationRatePlanID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Application Rate Plan Update",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Assert Internal BackOffice API creation response\", () => {",
							"    //parse the response JSON and test three properties",
							"    const responseJson = pm.response.json();",
							"    //Usually come as false and need to assert in future",
							"    //pm.expect(responseJson.isDeployed).equals(pm.collectionVariables.get('idTest1'));",
							"    pm.expect(responseJson.description).equals(pm.collectionVariables.get('applicationRatePlanDescription2'));",
							"    pm.expect(responseJson.displayName).equals(pm.collectionVariables.get('applicationRatePlanDisplayName2'));",
							"    pm.expect(responseJson.planName).equals(pm.collectionVariables.get('applicationRatePlanName2'));",
							"    //ID is autogenerated hence skipped asseting",
							"",
							"    pm.expect(responseJson.defaultLimit.type).equals(pm.collectionVariables.get('applicationRatePlanType2'));",
							"    pm.expect(responseJson.defaultLimit.requestCount.requestCount).to.eql(parseInt(pm.collectionVariables.get('applicationRatePlanRequestCount2')));",
							"    pm.expect(responseJson.defaultLimit.requestCount.timeUnit).equals(pm.collectionVariables.get('applicationRatePlanTimeUnit2'));",
							"    pm.expect(responseJson.defaultLimit.requestCount.unitTime).equals(parseInt(pm.collectionVariables.get('applicationRatePlanTime2')));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"planName\": \"{{applicationRatePlanName2}}\",\n  \"displayName\": \"{{applicationRatePlanDisplayName2}}\",\n  \"description\": \"{{applicationRatePlanDescription2}}\",\n  \"defaultLimit\": {\n    \"type\": \"{{applicationRatePlanType2}}\",\n    \"requestCount\": {\n      \"requestCount\": {{applicationRatePlanRequestCount2}},\n      \"timeUnit\": \"{{applicationRatePlanTimeUnit2}}\",\n      \"unitTime\": {{applicationRatePlanTime2}}\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/application-rate-plans/{{applicationRatePlanID}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"application-rate-plans",
						"{{applicationRatePlanID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI List Application Rate Plans",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/application-rate-plans",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"application-rate-plans"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Application Rate Plan Delete",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"policyName\": \"30PerMin\",\n  \"displayName\": \"30PerMin\",\n  \"description\": \"30 Per Min\",\n  \"type\": \"ApplicationThrottlePolicy\",\n  \"defaultLimit\": {\n    \"type\": \"REQUESTCOUNTLIMIT\",\n    \"requestCount\": {\n      \"requestCount\": 10,\n      \"timeUnit\": \"min\",\n      \"unitTime\": 1\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/application-rate-plans/{{applicationRatePlanID}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"application-rate-plans",
						"{{applicationRatePlanID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Deny Policy Create",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"  pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Assert AdminAPI Deny Policy creation response\", () => {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson.conditionType).equals(pm.collectionVariables.get('denyPolicyConditionTypeApplication'));",
							"    pm.expect(responseJson.conditionValue).equals(pm.collectionVariables.get('denyPolicyConditionValueApplication'));",
							"    pm.expect(responseJson.conditionStatus).equals(Boolean(pm.collectionVariables.get('denyPolicyConditionStateApplication')));",
							"    pm.collectionVariables.set(\"applicationDenyPolicyID\",responseJson.policyId)",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"conditionType\": \"{{denyPolicyConditionTypeApplication}}\",\n  \"conditionValue\": \"{{denyPolicyConditionValueApplication}}\",\n  \"conditionStatus\": {{denyPolicyConditionStateApplication}}\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/deny-policies",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"deny-policies"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Deny Policy Get Policy By ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Assert AdminAPI Deny Policy creation response\", () => {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson.conditionType).equals(pm.collectionVariables.get('denyPolicyConditionTypeApplication'));",
							"    pm.expect(responseJson.conditionValue).equals(pm.collectionVariables.get('denyPolicyConditionValueApplication'));",
							"    pm.expect(responseJson.conditionStatus).equals(Boolean(pm.collectionVariables.get('denyPolicyConditionStateApplication')));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/deny-policies/{{applicationDenyPolicyID}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"deny-policies",
						"{{applicationDenyPolicyID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI List  Deny Policy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Check Deny Policies list return from get deny policy list API call\", () => {",
							"    //parse the response JSON and test three properties",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson.list.length).to.be.above(0);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/deny-policies",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"deny-policies"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Deny Policy Update",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test(\"verify conditionState\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.conditionStatus).to.eql(false);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "PATCH",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"conditionStatus\": false\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/deny-policies/{{applicationDenyPolicyID}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"deny-policies",
						"{{applicationDenyPolicyID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Deny Policy Delete",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"policyName\": \"30PerMin\",\n  \"displayName\": \"30PerMin\",\n  \"description\": \"30 Per Min\",\n  \"type\": \"ApplicationThrottlePolicy\",\n  \"defaultLimit\": {\n    \"type\": \"REQUESTCOUNTLIMIT\",\n    \"requestCount\": {\n      \"requestCount\": 10,\n      \"timeUnit\": \"min\",\n      \"unitTime\": 1\n    }\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/deny-policies/{{applicationDenyPolicyID}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"deny-policies",
						"{{applicationDenyPolicyID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Organization Create",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"  pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Assert Organization creation response\", () => {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson.name).equals(pm.collectionVariables.get('organizationName'));",
							"    pm.expect(responseJson.displayName).equals(pm.collectionVariables.get('organizationDisplayName'));",
							"    pm.expect(responseJson.organizationClaimValue).equals(pm.collectionVariables.get('organizationClaimValue'));",
							"    pm.collectionVariables.set(\"organizationId\",responseJson.id)",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "default"
					},
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"{{organizationName}}\",\n    \"displayName\": \"{{organizationDisplayName}}\",\n    \"organizationClaimValue\": \"{{organizationClaimValue}}\",\n    \"serviceNamespaces\": [\n    \"{{serviceNamespace}}\"\n    ]\n}"
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/organizations",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"organizations"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Organization Update",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "default"
					},
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n      \"name\": \"{{organizationName}}\",\n      \"displayName\": \"{{organizationDisplayNameUpdate}}\",\n      \"organizationClaimValue\": \"{{organizationClaimValue}}\",\n      \"serviceNamespaces\": [\n        \"{{serviceNamespace}}\"\n      ]\n    }"
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/organizations/{{organizationId}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"organizations",
						"{{organizationId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Organizations List",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/organizations",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"organizations"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Organization Get By Organization Id",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/organizations/{{organizationId}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"organizations",
						"{{organizationId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Organization Remove",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/organizations/{{organizationId}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"organizations",
						"{{organizationId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Oraganizatin Info",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/organization-info",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"organization-info"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI List KeyManagers",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"pm.test(\"No of keymanagers equal to 0\",function(){",
							"const response = pm.response.json();",
							"pm.expect(response.count).equals(0);",
							"});",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/key-managers",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"key-managers"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Create KeyManager",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"  pm.response.to.have.status(201);",
							"});",
							"const response = pm.response.json();",
							"pm.collectionVariables.set(\"keymanager-uuid\",response.id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"name\": \"nonprod-idp\",\n  \"displayName\": \"Non production IDP\",\n  \"type\": \"nonProdIdp\",\n  \"description\": \"This is a key manager for Developers\",\n  \"endpoints\": [\n    {\n      \"name\": \"token_endpoint\",\n      \"value\": \"https://apk-release-wso2-apk-idp-ds-service:9443/oauth2/token\"\n    },\n    {\n        \"name\":\"dcr_endpoint\",\n        \"value\":\"https://apk-release-wso2-apk-idp-ds-service:9443/dcr\"\n    }\n  ],\n  \"signingCertificate\": {\n    \"type\": \"JWKS\",\n    \"value\": \"https://apk-release-wso2-apk-idp-ds-service:9443/oauth2/jwks\"\n  },\n  \"issuer\": \"https://idp.am.wso2.com/token\",\n  \"availableGrantTypes\": [\n    \"client_credentials\"\n  ],\n  \"enableTokenGeneration\": true,\n  \"enableMapOAuthConsumerApps\": true,\n  \"enableOAuthAppCreation\": true,\n  \"consumerKeyClaim\": \"azp\",\n  \"scopesClaim\": \"scopes\",\n  \"enabled\": true,\n  \"additionalProperties\": {\n    \"username\": \"admin\",\n    \"password\": \"admin\"\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/key-managers",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"key-managers"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Get KeyManager by id",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"const response = pm.response.json();",
							"pm.test(\"varify payload\",function(){",
							"pm.expect(response.name,\"nonprod-idp1\");",
							"pm.expect(response.type,\"nonProdIdp\");",
							"pm.expect(response.issuer,\"https://localhost:9444/services\");",
							"pm.expect(response.enabled,true);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/key-managers/{{keymanager-uuid}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"key-managers",
						"{{keymanager-uuid}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Update Keymanager byid",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"const response = pm.response.json();",
							"pm.test(\"varify payload\",function(){",
							"pm.expect(response.name,\"nonprod-idp1\");",
							"pm.expect(response.issuer,\"https://localhost:9444/services\");",
							"pm.expect(response.enabled,true);",
							"pm.expect(response.enableTokenGeneration,false);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"id\": \"{{keymanager-uuid}}\",\n    \"name\": \"nonprod-idp1\",\n    \"displayName\": \"Non production IDP\",\n    \"type\": \"nonProdIdp\",\n    \"description\": \"This is a key manager for Developers\",\n    \"endpoints\": [\n        {\n            \"name\": \"token_endpoint\",\n            \"value\": \"https://apk-release-wso2-apk-idp-ds-service:9443/oauth2/token\"\n        },\n        {\n            \"name\": \"dcr_endpoint\",\n            \"value\": \"https://apk-release-wso2-apk-idp-ds-service:9443/dcr\"\n        }\n    ],\n    \"signingCertificate\": {\n        \"type\": \"JWKS\",\n        \"value\": \"https://apk-release-wso2-apk-idp-ds-service:9443/oauth2/jwks\"\n    },\n    \"issuer\": \"https://idp.am.wso2.com/token\",\n    \"availableGrantTypes\": [\n        \"client_credentials\"\n    ],\n    \"enableTokenGeneration\": true,\n    \"enableMapOAuthConsumerApps\": true,\n    \"enableOAuthAppCreation\": true,\n    \"consumerKeyClaim\": \"azp\",\n    \"scopesClaim\": \"scopes\",\n    \"enabled\": true,\n    \"additionalProperties\": {\n        \"username\": \"admin\",\n        \"password\": \"admin\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/key-managers/{{keymanager-uuid}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"key-managers",
						"{{keymanager-uuid}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Delete KeyManager By id",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\"id\":\"{{keymanager-uuid}}\",\n  \"name\": \"nonprod-idp\",\n  \"displayName\": \"Non production IDP\",\n  \"type\": \"nonProdIdp\",\n  \"description\": \"This is a key manager for Developers\",\n  \"endpoints\": [\n    {\n      \"name\": \"token_endpoint\",\n      \"value\": \"https://localhost:9443/oauth2/token\"\n    },\n    {\n        \"name\":\"dcr_endpoint\",\n        \"value\":\"https://localhost:9443/oauth2/jwks\"\n    }\n  ],\n  \"certificates\": {\n    \"type\": \"JWKS\",\n    \"value\": \"https://localhost:9443/oauth2/jwks\"\n  },\n  \"issuer\": \"https://localhost:9444/services\",\n  \"availableGrantTypes\": [\n    \"client_credentials\"\n  ],\n  \"enableTokenGeneration\": false,\n  \"enableMapOAuthConsumerApps\": true,\n  \"enableOAuthAppCreation\": true,\n  \"consumerKeyClaim\": \"azp\",\n  \"scopesClaim\": \"scopes\",\n  \"enabled\": true,\n  \"additionalProperties\": {\n    \"username\": \"admin\",\n    \"password\": \"admin\"\n  }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/key-managers/{{keymanager-uuid}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"key-managers",
						"{{keymanager-uuid}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Get KeyManager by id after deletion",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"AdminAPI Get KeyManager by id after deletion\", function () {",
							"  pm.response.to.have.status(404);",
							"  const response = pm.response.json();",
							"  pm.expect(response.code).equals(909439);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/key-managers/{{keymanager-uuid}}",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"key-managers",
						"{{keymanager-uuid}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "AdminAPI Get settings",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"AdminAPI Get KeyManager by id after deletion\", function () {",
							"  pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Host",
						"value": "api.am.wso2.com",
						"type": "default"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{gatewayBaseURl}}/api/am/admin/settings",
					"host": [
						"{{gatewayBaseURl}}"
					],
					"path": [
						"api",
						"am",
						"admin",
						"settings"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "applicationRatePlanName",
			"value": "95PerMinPlan",
			"type": "string"
		},
		{
			"key": "applicationRatePlanDisplayName",
			"value": "95 Requests per Minutes",
			"type": "string"
		},
		{
			"key": "applicationRatePlanDescription",
			"value": "95 Requests per Minutes",
			"type": "string"
		},
		{
			"key": "applicationRatePlanType",
			"value": "ApplicationThrottlePolicy",
			"type": "string"
		},
		{
			"key": "applicationRatePlanRequestCount",
			"value": "95",
			"type": "string"
		},
		{
			"key": "applicationRatePlanTimeUnit",
			"value": "min",
			"type": "string"
		},
		{
			"key": "applicationRatePlanTime",
			"value": "1",
			"type": "string"
		},
		{
			"key": "applicationRatePlanID",
			"value": "",
			"type": "string"
		},
		{
			"key": "applicationRatePlanName2",
			"value": "93PerMinPlan",
			"type": "string"
		},
		{
			"key": "applicationRatePlanDisplayName2",
			"value": "93 Requests per Minutes",
			"type": "string"
		},
		{
			"key": "applicationRatePlanDescription2",
			"value": "93 Requests per Minutes",
			"type": "string"
		},
		{
			"key": "applicationRatePlanType2",
			"value": "ApplicationThrottlePolicy",
			"type": "string"
		},
		{
			"key": "applicationRatePlanRequestCount2",
			"value": "93",
			"type": "string"
		},
		{
			"key": "applicationRatePlanTimeUnit2",
			"value": "min",
			"type": "string"
		},
		{
			"key": "applicationRatePlanTime2",
			"value": "15",
			"type": "string"
		},
		{
			"key": "denyPolicyConditionTypeApplication",
			"value": "APPLICATION",
			"type": "string"
		},
		{
			"key": "denyPolicyConditionValueApplication",
			"value": "admin:MyApp3",
			"type": "string"
		},
		{
			"key": "denyPolicyConditionStateApplication",
			"value": "true",
			"type": "string"
		},
		{
			"key": "applicationDenyPolicyID",
			"value": "",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": ""
		},
		{
			"key": "organizationName",
			"value": "Finance",
			"type": "default"
		},
		{
			"key": "organizationDisplayName",
			"value": "Finance",
			"type": "default"
		},
		{
			"key": "organizationClaimValue",
			"value": "0123-456-789-101",
			"type": "default"
		},
		{
			"key": "serviceNamespace",
			"value": "Test",
			"type": "default"
		},
		{
			"key": "organizationDisplayNameUpdate",
			"value": "FinanceMarketing",
			"type": "default"
		},
		{
			"key": "organizationId",
			"value": "",
			"type": "default"
		},
		{
			"key": "keymanager-uuid",
			"value": ""
		}
	]
}